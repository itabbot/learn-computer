# 资源指标

## 1. CPU

中央处理器（英文：Central Processing Unit, CPU）是一块超大规模的集成电路，是一台计算机的运算核心（Core）和控制核心（Control Unit）。它的功能主要是解释计算机指令以及处理计算机软件中的数据。

相关的指标有：

- 系统平均负载（CPU Load）：一般要求小于 CPU 的核数值。
- 使用率：业界警戒值为 75%。
- 用户态（user）
- 系统态（sys）：一般要求小于或者等于 30%。
- 等待态（wait）：一般要求小于或者等于 5%。
- 空闲态（idle）

## 2. Memory

内存（英文：Memory）是计算机中重要的部件之一，它是与 CPU 进行沟通的桥梁。计算机中所有程序的运行都是在内存中进行的，因此内存的性能对计算机的影响非常大。

现代的操作系统为了最大利用内存，在内存中存放了缓存，因此内存利用率 100% 并不代表内存有瓶颈，衡量系统内存有瓶颈主要靠 SWAP（与虚拟内存交换）交换空间利用率，一般情况下，SWAP 交换空间利用率要低于 70%，太多的交换将会引起系统性能低下。

## 3. 磁盘吞吐量

磁盘吞吐量（英文：Disk Throughput）是指在无磁盘故障的情况下单位时间内通过磁盘的数据量。

磁盘指标主要有：每秒读写多少兆、磁盘繁忙率、磁盘队列数、平均服务时间、平均等待时间、空间利用率等。其中**磁盘繁忙率**是直接反映磁盘是否有瓶颈的重要依据，一般情况下，磁盘繁忙率要低于 70%。

## 4. 网络吞吐量

网络吞吐量（英文：Network Throughput）是指在无网络故障的情况下单位时间内通过的网络的数据数量，单位为 Byte/s。

网络吞吐量指标用于衡量系统对于网络设备或链路传输能力的需求。当网络吞吐量指标接近网络设备或链路最大传输能力时，则需要考虑升级网络设备。网络吞吐量指标主要有每秒有多少兆流量进出，一般情况下不能超过设备或链路最大传输能力的 70%。

## 5. 内核参数

操作系统内核参数主要包括信号量、进程、文件句柄等，一般不要超过设置的参数值即可。

| 指标            | 单位 | 解释                                                   |
| --------------- | :--: | ------------------------------------------------------ |
| Maxuprc         |  个  | 限制每个用户的用户进程的最大数量                       |
| Max_thread_proc |  个  | 定义每个进程允许的最大线程数量                         |
| Filecache_max   | 字节 | 最大可用于 cache file I/O 的物理内存                   |
| Ninode          |  个  | 内存中 HFS 文件系统打开 i 节点的最大数量               |
| Nkthread        |  个  | 限制允许同时运行的线程数量                             |
| Nproc           |  个  | 限制允许同时运行的进程数量                             |
| Nstrpty         |  个  | 基于 STREAMS 的伪终端 （pts） 的最大数量               |
| Maxdsiz         | 字节 | 任何用户进程的数据段的最大大小（以字节为单位）         |
| maxdsiz_64bit   | 字节 | 任何用户进程的数据段的最大大小（以字节为单位）         |
| maxfiles_lim    |  个  | 每个进程的文件描述符的最大数目硬限制                   |
| maxssiz_64bit   | 字节 | 任何用户进程的堆栈的最大大小                           |
| Maxtsiz         | 字节 | 任一用户进程的文本段的最大大小                         |
| nflocks         |  个  | 文件锁的最大数量                                       |
| maxtsiz_64bit   | 字节 | 任一用户进程的文本段的最大大小                         |
| msgmni          |  个  | 系统级 System V IPC 消息队列 （ID) 所允许的最大数量    |
| msgtql          |  个  | 系统中任意时间的最大 System V IPC 消息数               |
| npty            |  个  | BSD 伪终端 （pty） 的最大数量                          |
| nstrtel         |  个  | 指定内核可支持传入 telnet 会话的 telnet 设备文件的数量 |
| nswapdev        |  个  | 可用于交换的设备的最大数量                             |
| nswapfs         |  个  | 可用于交换的文件系统的最大数量                         |
| semmni          |  个  | System V IPC 系统级信号量标识符的数量                  |
| semmns          |  个  | System V 系统级信号量的数量                            |
| shmmax          | 字节 | System V 共享内存段的最大大小                          |
| shmmni          |  个  | 系统中 System V 共享内存段标识符的数量                 |
| shmseg          |  个  | 每个进程 System V 共享内存段的最大数量                 |
