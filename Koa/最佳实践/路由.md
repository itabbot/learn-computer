# 路由实践<!-- omit in toc -->

[官方 API](https://github.com/koajs/router/blob/c3bbb659145837f9652697a1d32c342cbc323f0d/API.md) | [API 快照](../snapshoot/koa-router-API-20220828.md) | [实践工程](https://github.com/fooins/insbiz)

Koa 本身不带路由功能，但 Koa 官方团队开发了路由中间件 [koa-router](https://github.com/koajs/router)，路由器会将符合规则的请求路由到指定的处理函数。

## API 简述

以下是对原始 API 目录进行注释和简述，并链接到原文快照的对应目录。

- [路由器](../snapshoot/koa-router-API-20220828.md#router-)

  - [创建路由器：`new Router([opts])`](../snapshoot/koa-router-API-20220828.md#new-routeropts)
  - [设置路由规则：`router.get|put|post|patch|delete|del|all`](../snapshoot/koa-router-API-20220828.md#routergetputpostpatchdeletedel--router)
  - [给路由规则命名](../snapshoot/koa-router-API-20220828.md#named-routes)
  - [匹配主机名（创建路由器时设置）](../snapshoot/koa-router-API-20220828.md#match-host)
  - [一个路由规则可以使用多个中间件](../snapshoot/koa-router-API-20220828.md#multiple-middleware)

- [嵌套路由器](../snapshoot/koa-router-API-20220828.md#nested-routers)

  - [设置路径前缀（创建路由器时）](../snapshoot/koa-router-API-20220828.md#router-prefixes)
  - [在路径中定义参数并在中间件通过 `ctx.params` 获取参数值](../snapshoot/koa-router-API-20220828.md#url-parameters)
  - [获取路由器的所有路由规则：`router.routes()`](../snapshoot/koa-router-API-20220828.md#routerroutes--function)
  - [为路由器使用中间件（是嵌套路由的关键）：`router.use([path], middleware)`](../snapshoot/koa-router-API-20220828.md#routerusepath-middleware--router)
  - [为已实例化的路由器设置前缀：`router.prefix(prefix)`](../snapshoot/koa-router-API-20220828.md#routerprefixprefix--router)
  - [生成一个处理 HTTP 请求方法的中间件：`router.allowedMethods([opts])`](../snapshoot/koa-router-API-20220828.md#routerallowedmethodsoptions--function)
  - [重定向路由规则：`router.redirect(source, destination, [code])`](../snapshoot/koa-router-API-20220828.md#routerredirectsource-destination-code--router)
  - [获取某个路由规则：`router.route(name)`](../snapshoot/koa-router-API-20220828.md#routerroutename--layer--false)
  - [生成某个路由规则对应的 URL：`router.url(name, params, [opts])`](../snapshoot/koa-router-API-20220828.md#routerurlname-params-options--string--error)
  - [为指定的路径参数执行中间件：`router.param(param, middleware)`](../snapshoot/koa-router-API-20220828.md#routerparamparam-middleware--router)
  - [使用模式路径和参数生成 URL：`Router.url(path, params)`](../snapshoot/koa-router-API-20220828.md#routerurlpath-params--string)
